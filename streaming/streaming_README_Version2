# ğŸš• NYC Taxi Real-Time Streaming Pipeline

Real-time taxi trip analytics with fraud detection. 

## ğŸ—ï¸ Architecture

```
Taxi App â†’ ngrok â†’ FastAPI â†’ Kafka â†’ Spark Streaming â†’ Redis â†’ Streamlit
```

## ğŸ“ Structure

```
streaming/
â”œâ”€â”€ docker/          # Kafka + Redis
â”œâ”€â”€ api/             # FastAPI webhook
â”œâ”€â”€ spark/           # Fraud detection
â”œâ”€â”€ dashboard/       # Streamlit UI
â”œâ”€â”€ simulator/       # Test data generator
â””â”€â”€ README.md
```

## ğŸš€ Quick Start

### 1. Start Infrastructure
```bash
cd streaming/docker
docker-compose up -d
```

### 2. Start FastAPI
```bash
cd streaming/api
pip install -r requirements. txt
uvicorn main:app --host 0.0. 0.0 --port 8000 --reload
```

### 3. Start ngrok (for external access)
```bash
ngrok http 8000
```

### 4. Start Spark Streaming
```bash
cd streaming/spark
pip install -r requirements. txt
spark-submit --packages org.apache.spark:spark-sql-kafka-0-10_2.12:3.5.0 fraud_detector.py
```

### 5. Start Dashboard
```bash
cd streaming/dashboard
pip install -r requirements. txt
streamlit run app.py
```

### 6. Test with Simulator
```bash
cd streaming/simulator
pip install -r requirements. txt
python send_trips.py --api-url http://localhost:8000/api/v1/trips
```

## ğŸ“¡ API Endpoints

| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/` | Health check |
| GET | `/health` | Detailed health |
| POST | `/api/v1/trips` | Submit single trip |
| POST | `/api/v1/trips/batch` | Submit multiple trips |

## ğŸ•µï¸ Fraud Detection Rules

- Speed > 100 mph (impossible)
- Zero distance with fare
- Tip > Fare
- Same pickup/dropoff with high fare
- Night + Cash + High fare
- Fake airport fees
- And more...

## ğŸ“Š Dashboard Pages

1. **ğŸ“ˆ Live Overview** - Real-time KPIs
2.  **ğŸ•µï¸ Fraud Detection** - Alerts and analysis